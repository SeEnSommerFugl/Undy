<UserControl x:Class="Undy.Views.PaymentView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Border Style="{DynamicResource Card}">
        <Grid Margin="20">

            <!-- Centered content block -->
            <Grid HorizontalAlignment="Center"
                  VerticalAlignment="Stretch"
                  MaxWidth="900">

                <Grid.RowDefinitions>
                    <!-- Title -->
                    <RowDefinition Height="Auto"/>
                    <!-- Spacer -->
                    <RowDefinition Height="16"/>
                    <!-- List (scrolls) -->
                    <RowDefinition Height="*"/>
                    <!-- Button -->
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Title -->
                <TextBlock Grid.Row="0"
                           Text="Betalinger"
                           Style="{DynamicResource H2}"
                           HorizontalAlignment="Center"/>

                <!-- IMPORTANT: This is a TABLE list with HEADERS we want to READ, so use ListView.Table (not Details.NoHeaders) -->
                <ListView x:Name="PaymentsList"
                          Grid.Row="2"
                          ItemsSource="{Binding PaymentView}"
                          SelectedItem="{Binding SelectedOrder}"
                          Style="{StaticResource ListView.Table}">

                    <ListView.View>
                        <GridView AllowsColumnReorder="False">

                            <GridViewColumn Header="Ordre #"
                                            Width="140"
                                            DisplayMemberBinding="{Binding SalesOrderNumber}" />

                            <GridViewColumn Header="Kundenavn"
                                            Width="260"
                                            DisplayMemberBinding="{Binding FullName}" />

                            <GridViewColumn Header="Samlet beløb"
                                             Width="160"
                                             DisplayMemberBinding="{Binding TotalPrice}" />

                            <GridViewColumn Header="Betales"
                                            Width="90">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <CheckBox x:Name="PaymentCheckBox"
                                                  HorizontalAlignment="Center"
                                                  Tag="{Binding SalesOrderID}"
                                                  Checked="PaymentCheckBox_Checked"
                                                  Unchecked="PaymentCheckBox_Unchecked"
                                                  Loaded="PaymentCheckBox_Loaded"
                                                  Unloaded="PaymentCheckBox_Unloaded"/>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>

                        </GridView>
                    </ListView.View>
                </ListView>

                <!-- Confirm Payment Button -->
                <Button Grid.Row="3"
                        Content="Bekræft betaling"
                        Style="{DynamicResource PrimaryButton}"
                        Command="{Binding ConfirmPaymentCommand}"
                        HorizontalAlignment="Center"
                        Height="50"
                        FontSize="30"
                        Width="{Binding ActualWidth, ElementName=PaymentsList}"
                        Margin="0,16,0,10"/>
            </Grid>

        </Grid>
    </Border>
</UserControl>

<UserControl x:Class="Undy.Views.PaymentView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="White">

    <Border Style="{DynamicResource Card}">
        <Grid Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <!-- Titel -->
                <RowDefinition Height="Auto"/>
                <!-- Undertitel -->
                <RowDefinition Height="*"/>
                <!-- Liste -->
                <RowDefinition Height="Auto"/>
                <!-- Knap -->
                <RowDefinition Height="Auto"/>
                <!-- Status -->
            </Grid.RowDefinitions>

            <!-- Titel -->
            <TextBlock Grid.Row="0"
                       Text="Betalinger"
                       Style="{DynamicResource H2}"
                       HorizontalAlignment="Center"/>

            <!-- Undertitel -->
            <TextBlock Grid.Row="1"
                       Text="Se ordrer der er afsendt, men endnu ikke betalt."
                       Style="{DynamicResource H3}"
                       HorizontalAlignment="Center"
                       Margin="0,10,0,20"
                       Foreground="Red"/>

            <!-- LISTE MED ORDRER -->
            <ListView Grid.Row="2"
                      ItemsSource="{Binding PaymentView}"
                      SelectedItem="{Binding SelectedOrder}"
                      Margin="0,0,0,10">

                <!-- Header-styling -->
                <ListView.Resources>
                    <Style TargetType="GridViewColumnHeader">
                        <Setter Property="Foreground" Value="#333"/>
                        <Setter Property="FontWeight" Value="Bold"/>
                        <Setter Property="HorizontalContentAlignment" Value="Center"/>
                        <Setter Property="FontSize" Value="14"/>
                        <Setter Property="Padding" Value="4"/>
                    </Style>
                </ListView.Resources>

                <ListView.View>
                    <GridView>

                        <!-- Ordrenummer -->
                        <GridViewColumn Header="Ordrenummer" Width="120"
                                        DisplayMemberBinding="{Binding SalesOrderNumber}" />

                        <!-- Kundenavn -->
                        <GridViewColumn Header="Kundenavn" Width="200"
                                        DisplayMemberBinding="{Binding FullName}" />

                        <!-- Samlet beløb -->
                        <GridViewColumn Header="Samlet beløb" Width="140">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding TotalPrice}"
                                               TextAlignment="Center"/>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>

                        <!-- Checkbox til betaling -->
                        <GridViewColumn Header="Betales" Width="80">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <CheckBox x:Name="PaymentCheckBox" HorizontalAlignment="Center"
                                              Tag="{Binding SalesOrderID}"
                                              Checked="PaymentCheckBox_Checked"
                                              Unchecked="PaymentCheckBox_Unchecked"
                                              Loaded="PaymentCheckBox_Loaded"
                                              Unloaded="PaymentCheckBox_Unloaded"/>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>

                    </GridView>
                </ListView.View>
            </ListView>

            <!-- Knap nederst til højre -->
            <Button Grid.Row="3"
                    Content="Registrer betaling"
                    Command="{Binding ConfirmPaymentCommand}"
                    Style="{DynamicResource ButtonBase}"
                    HorizontalAlignment="Right"
                    Width="200"
                    Margin="0,10,0,0"/>

            <!-- Status besked -->
            <TextBlock Grid.Row="4"
                       Text="{Binding StatusMessage}"
                       Foreground="Red"
                       HorizontalAlignment="Center"
                       Margin="0,15,0,0"
                       FontSize="16"
                       FontWeight="Bold"/>

        </Grid>
    </Border>
</UserControl>

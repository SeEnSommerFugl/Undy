<UserControl x:Class="Undy.Views.TestSalesOrderView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Undy.Views"
             mc:Ignorable="d" 
             MaxWidth="1920" MaxHeight="1080"
             Background="White">

    <Border Style="{DynamicResource Card}" Margin="40">
        <Grid Margin="40">
            <Grid.RowDefinitions>
                <!-- Title -->
                <RowDefinition Height="Auto"/>  
                <!-- Subtitle -->
                <RowDefinition Height="Auto"/>  
                <!-- Fields -->
                <RowDefinition Height="Auto"/>  
                <!-- Add + List/DataGrid -->
                <RowDefinition Height="Auto"/>  
                <!-- Confirm button -->
                <RowDefinition Height="Auto"/>  
            </Grid.RowDefinitions>

            <!-- Title -->
            <TextBlock Grid.Row="0"
                       Text="Opret Salgsordre"
                       Style="{DynamicResource H2}"/>

            <!-- Subtitle -->
            <TextBlock Grid.Row="1"
                       Text="Indtast kundenavn, vælg produkt og angiv antal for det valgte produkt."
                       Style="{DynamicResource H3}"
                       HorizontalAlignment="Center"
                       Foreground="Red"/>

            <!-- Fields (Title Left, inputs højre) -->
            <Grid Grid.Row="2"
                  Margin="0,30"
                  HorizontalAlignment="Center">
                <Grid.ColumnDefinitions>
                    <!-- Labels -->
                    <ColumnDefinition Width="Auto"/>   
                    <!-- Spacer -->
                    <ColumnDefinition Width="20"/>    
                    <!-- Input -->
                    <ColumnDefinition Width="Auto"/>   
                </Grid.ColumnDefinitions>

                <Grid.RowDefinitions>
                    <!-- Customer -->
                    <RowDefinition Height="50"/>
                    <!-- Product -->
                    <RowDefinition Height="50"/>
                    <!-- Amount -->
                    <RowDefinition Height="50"/>
                    <!-- Add Product -->
                    <RowDefinition Height="50"/>
                </Grid.RowDefinitions>

                <!-- Customer Name -->
                <TextBlock Grid.Row="0" Grid.Column="0"
                           Text="KundeID"
                           Style="{DynamicResource TitleLeft}"/>

                <TextBox Grid.Row="0" Grid.Column="2"
                         Text="{Binding CustomerNumber, UpdateSourceTrigger=PropertyChanged}"
                         Style="{DynamicResource InputRight}"/>

                <!-- Product Choice -->
                <TextBlock Grid.Row="1" Grid.Column="0"
                           Text="Produkt"
                           Style="{DynamicResource TitleLeft}"/>

                <!-- TODO Til Multi-Header ComboBox: ProductName, Colour, Size, Price, NumberInStock -->
                <ComboBox Grid.Row="1" Grid.Column="2"
                          Height="45"
                          ItemsSource="{Binding Products}"
                          SelectedItem="{Binding SelectedProduct}"
                          DisplayMemberPath="ProductName"/>

                <!-- Quantity -->
                <TextBlock Grid.Row="2" Grid.Column="0"
                           Text="Antal"
                           Style="{DynamicResource TitleLeft}"/>

                <TextBox Grid.Row="2" Grid.Column="2"
                         Text="{Binding Quantity, UpdateSourceTrigger=PropertyChanged}"
                         Style="{DynamicResource InputRight}"/>

                <Button Grid.Row="3" Grid.ColumnSpan="3"
                    Content="Tilføj Produkt"
                        Style="{DynamicResource ButtonBase}"
                        Command="{Binding AddProductCommand}"
                        HorizontalAlignment="Center"/>
            </Grid>

            <!-- Add Product + ListView/DataGrid -->
            <StackPanel Grid.Row="3"
                        Margin="0,10,0,0"
                        HorizontalAlignment="Center">

                <!-- ListView Of SalesOrderLines -->
                <ListView ItemsSource="{Binding SalesOrderLines}" Height="300" Width="700">
                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding Product.ProductName}" Width="150"/>
                                <TextBlock Text="{Binding Quantity}" Width="50"/>
                                <TextBlock Text="{Binding UnitPrice}" Width="80"/>
                                <Button Content="X"
                                        Command="{Binding DataContext.RemoveSalesOrderLineCommand,
                                                  RelativeSource={RelativeSource AncestorType=UserControl}}"
                                        CommandParameter="{Binding}"/>
                            </StackPanel>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </StackPanel>

            <!-- Confirm Sale Button -->
            <Button Grid.Row="5"
                    Content="Bekræft ordre"
                    Command="{Binding ConfirmCommand}"
                    Style="{DynamicResource ButtonBase}"
                    HorizontalAlignment="Center"
                    Margin="0,10,0,0"/>
        </Grid>
    </Border>
</UserControl>
